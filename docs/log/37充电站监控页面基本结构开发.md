# 37充电站监控页面基本结构开发

## 页面组件拆分
- 主页面 `src\views\charging-station\Monitor.vue`
    - 查询表单 部分，对应组件`FormQuery.vue`
    - 数据统计 部分，对应组件`StationStatistics.vue`
    - 编辑对话框 部分，对应组件`ModalEdit.vue`文件
    - 操作区域 部分，合并到 列表区域 部分，写到`TableList.vue`文件中
    - 列表区域 部分，对应组件`TableList.vue`

## 接口调用
- 前端定义的参与名称最好与后端保持一致
    - 好处：不用重新命名；方便高效。

## 开发

### 查询表单 FormQuery.vue
```vue
<template>
  <el-card>
    <el-row :gutter="20">
      <el-col :span="6">
        <el-input
          v-model="queryForm.searchStr"
          style="max-width: 600px"
          placeholder="请输入站点名称或者站点编码"
          class="input-with-select"
        >
          <template #append>
            <el-select v-model="queryForm.searchType" style="width: 115px">
              <el-option label="按名称查询" value="name" />
              <el-option label="按编码查询" value="code" />
            </el-select>
          </template>
        </el-input>
      </el-col>
      <el-col :span="6">
        <el-select v-model="queryForm.status">
          <el-option
            v-for="item in statusList"
            :key="item.value"
            :label="item.name"
            :value="item.value"
          ></el-option>
        </el-select>
      </el-col>
      <el-col :span="6">
        <el-button type="primary" @click="search">查询</el-button>
        <el-button @click="reset">重置</el-button>
      </el-col>
    </el-row>
  </el-card>
</template>
<script setup lang="ts">
<template>
  <el-card>
    <el-row :gutter="20">
      <el-col :span="6">
        <el-input
          v-model="queryForm.searchStr"
          style="max-width: 600px"
          placeholder="站点名称或者站点编码"
          class="input-with-select"
        >
          <template #append>
            <el-select v-model="queryForm.searchType" style="width: 115px">
              <el-option label="按名称查询" value="name" />
              <el-option label="按编码查询" value="code" />
            </el-select>
          </template>
        </el-input>
      </el-col>
      <el-col :span="6">
        <el-select v-model="queryForm.status" placeholder="充电站状态">
          <el-option
            v-for="item in statusList"
            :key="item.value"
            :label="item.name"
            :value="item.value"
          ></el-option>
        </el-select>
      </el-col>
      <el-col :span="6">
        <el-button type="primary" @click="search">查询</el-button>
        <el-button @click="reset">重置</el-button>
      </el-col>
    </el-row>
  </el-card>
</template>
<script setup lang="ts">
import { reactive } from "vue";


const statusList = [
  {
    name: "全部",
    value: "",
  },
  {
    name: "使用中",
    value: "1",
  },
  {
    name: "空闲中",
    value: "2",
  },
  {
    name: "维护中",
    value: "3",
  },
  {
    name: "待维修中",
    value: "4",
  },
];

const queryForm = reactive({
  searchStr: "",
  searchType: "name",
  status: "",
});

// 查询
function search() {
  console.log("search......");
}

// 重置
function reset() {
  queryForm.searchStr = "";
  queryForm.searchType = "name";
  queryForm.status = "";
}
</script>
```

### 数据统计 StationStatistics.vue
```vue
<template>
  <el-card class="mt">
    <el-row>
      <el-col :span="6" v-for="(item, index) in statisticsList" :key="index">
        <el-statistic :title="item.name" :value="item.value" />
      </el-col>
    </el-row>
  </el-card>
</template>
<script setup lang="ts">
import { ref } from "vue";
interface Statistics {
  name: string;
  value: number;
}

const statisticsList = ref<Statistics[]>([
  {
    name: "累计充电量（度）",
    value: 268900,
  },
  {
    name: "累计充电次数（次）",
    value: 268900,
  },
  {
    name: "服务区域（个）",
    value: 88,
  },
  {
    name: "累计效益（元）",
    value: 5622178,
  },
]);
</script>
```

### 列表区域
```vue
<template>
  <el-card class="mt">
    <el-row>
      <el-col
        :span="6"
        v-for="(button, index) in buttonOperationList"
        :key="index"
      >
        <component :is="button.name" v-bind="button.props" v-on="button.on">
          <template v-if="button.slots?.default">
            <component :is="button.slots.default"></component>
          </template>
        </component>
      </el-col>
    </el-row>
  </el-card>
</template>
<script lang="ts" setup>
import { Plus } from "@element-plus/icons-vue";
const buttonOperationList = [
  {
    name: "el-button",
    props: {
      type: "primary",
      icon: Plus,
    },
    on: {
      click: add,
    },
    slots: {
      default: () => "新增充电站",
    },
  },
];

function add() {
  console.log("add");
}
</script>
```


### 主页面
```vue
<template>
  <FormQuery></FormQuery>
  <StationStatistics></StationStatistics>
  <TableList></TableList>
</template>
<script setup lang="ts">
import FormQuery from "./components/FormQuery.vue";
import StationStatistics from "./components/StationStatistics.vue";
import TableList from './components/TableList.vue'
</script>
```